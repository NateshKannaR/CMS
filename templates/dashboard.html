{% extends "base.html" %}

{% block title %}Dashboard - BrainLow{% endblock %}

{% block content %}
</div>

<!-- Vibrant Modern Dashboard -->
<div class="vibrant-dashboard">
    <!-- Animated Background -->
    <div class="animated-bg">
        <div class="wave wave1"></div>
        <div class="wave wave2"></div>
        <div class="wave wave3"></div>
        <div class="floating-shapes">
            <div class="shape circle"></div>
            <div class="shape triangle"></div>
            <div class="shape square"></div>
            <div class="shape hexagon"></div>
        </div>
    </div>

    <!-- Colorful Sidebar -->
    <div class="colorful-sidebar">
        <div class="sidebar-header">
            <div class="brand-logo">
                <div class="logo-container">
                    <i class="fas fa-graduation-cap"></i>
                    <div class="logo-glow"></div>
                </div>
                <span class="brand-text">BrainLow</span>
            </div>
        </div>
        
        <nav class="sidebar-nav">
            <a class="nav-item active" href="{{ url_for('dashboard') }}">
                <div class="nav-icon purple">
                    <i class="fas fa-home"></i>
                </div>
                <span>Dashboard</span>
                <div class="nav-ripple"></div>
            </a>
            
            {% if session.role == 'teacher' %}
            <div class="nav-section">
                <div class="section-title">Teaching Hub</div>
                <a class="nav-item" href="{{ url_for('create_course') }}">
                    <div class="nav-icon blue">
                        <i class="fas fa-plus"></i>
                    </div>
                    <span>Create Course</span>
                    <div class="nav-ripple"></div>
                </a>
                <a class="nav-item" href="{{ url_for('create_quiz') }}">
                    <div class="nav-icon orange">
                        <i class="fas fa-question-circle"></i>
                    </div>
                    <span>Create Quiz</span>
                    <div class="nav-ripple"></div>
                </a>
                <a class="nav-item" href="{{ url_for('teacher_messages') }}">
                    <div class="nav-icon teal">
                        <i class="fas fa-comments"></i>
                    </div>
                    <span>Messages</span>
                    <div class="nav-ripple"></div>
                </a>
                <a class="nav-item" href="{{ url_for('teacher_notification') }}">
                    <div class="nav-icon green">
                        <i class="fas fa-bell"></i>
                    </div>
                    <span>Notifications</span>
                    <div class="nav-ripple"></div>
                </a>
            </div>
            {% else %}
            <div class="nav-section">
                <div class="section-title">Learning Zone</div>
                <a class="nav-item" href="{{ url_for('join_quiz') }}">
                    <div class="nav-icon orange">
                        <i class="fas fa-play-circle"></i>
                    </div>
                    <span>Join Quiz</span>
                    <div class="nav-ripple"></div>
                </a>
                <a class="nav-item" href="{{ url_for('practice_quiz') }}">
                    <div class="nav-icon green">
                        <i class="fas fa-brain"></i>
                    </div>
                    <span>Practice Quiz</span>
                    <div class="nav-ripple"></div>
                </a>
                <a class="nav-item" href="{{ url_for('student_messages') }}">
                    <div class="nav-icon teal">
                        <i class="fas fa-comments"></i>
                    </div>
                    <span>Messages</span>
                    <div class="nav-ripple"></div>
                </a>
            </div>
            {% endif %}
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Hero Section -->
        <div class="hero-section">
            <div class="hero-bg"></div>
            <div class="hero-content">
                <div class="welcome-area">
                    <div class="greeting-container">
                        <h1 class="welcome-title">
                            <span class="wave-text">Welcome back,</span>
                            <span class="name-highlight">{{ session.full_name.split()[0] }}!</span>
                        </h1>
                        <p class="welcome-subtitle">Ready to explore your learning universe? âœ¨</p>
                    </div>
                    <div class="welcome-animation">
                        <div class="orbit">
                            <div class="planet"></div>
                        </div>
                    </div>
                </div>
                <div class="action-buttons">
                    {% if session.role == 'student' %}
                    <button class="rainbow-btn" data-bs-toggle="modal" data-bs-target="#joinCourseModal">
                        <i class="fas fa-plus"></i>
                        <span>Join Course</span>
                        <div class="btn-shine"></div>
                    </button>
                    {% else %}
                    <a href="{{ url_for('create_course') }}" class="rainbow-btn">
                        <i class="fas fa-plus"></i>
                        <span>Create Course</span>
                        <div class="btn-shine"></div>
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Dynamic Stats -->
        <div class="stats-container">
            <div class="stat-card purple" data-value="{{ courses|length }}">
                <div class="stat-bg"></div>
                <div class="stat-icon">
                    <i class="fas fa-book"></i>
                </div>
                <div class="stat-info">
                    <div class="stat-number">0</div>
                    <div class="stat-label">{{ 'Teaching' if session.role == 'teacher' else 'Enrolled' }}</div>
                </div>
                <div class="stat-wave"></div>
            </div>

            <div class="stat-card blue" data-value="{{ assignments_count|default(0) }}">
                <div class="stat-bg"></div>
                <div class="stat-icon">
                    <i class="fas fa-tasks"></i>
                </div>
                <div class="stat-info">
                    <div class="stat-number">0</div>
                    <div class="stat-label">{{ 'Created' if session.role == 'teacher' else 'Due' }}</div>
                </div>
                <div class="stat-wave"></div>
            </div>

            <div class="stat-card orange" data-value="{{ messages_count|default(0) }}">
                <div class="stat-bg"></div>
                <div class="stat-icon">
                    <i class="fas fa-comments"></i>
                </div>
                <div class="stat-info">
                    <div class="stat-number">0</div>
                    <div class="stat-label">Messages</div>
                </div>
                <div class="stat-wave"></div>
            </div>

            <div class="stat-card teal" data-value="{{ notifications_count|default(0) }}">
                <div class="stat-bg"></div>
                <div class="stat-icon">
                    <i class="fas fa-bell"></i>
                </div>
                <div class="stat-info">
                    <div class="stat-number">0</div>
                    <div class="stat-label">Notifications</div>
                </div>
                <div class="stat-wave"></div>
            </div>
        </div>

        <!-- Content Area -->
        <div class="content-area">
            <!-- Courses Section -->
            <div class="courses-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="title-text">My Courses</span>
                        <div class="title-decoration"></div>
                    </h2>
                </div>

                {% if courses %}
                <div class="courses-grid">
                    {% for course in courses %}
                    <div class="course-card" onclick="window.location.href='{{ url_for('course_detail', course_id=course._id) }}'">
                        <div class="card-bg"></div>
                        <div class="course-header">
                            <div class="course-avatar">
                                <span>{{ course.name[0].upper() }}</span>
                                <div class="avatar-ring"></div>
                            </div>
                            <div class="course-badge">{{ course.course_code }}</div>
                        </div>
                        <div class="course-body">
                            <h3 class="course-name">{{ course.name }}</h3>
                            <p class="course-desc">{{ course.description[:60] }}{% if course.description and course.description|length > 60 %}...{% endif %}</p>
                        </div>
                        <div class="course-stats">
                            <div class="stat-item">
                                <i class="fas fa-users"></i>
                                <span>{{ course.enrollments|length if course.enrollments else 0 }}</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-tasks"></i>
                                <span>{{ course.assignments|length if course.assignments else 0 }}</span>
                            </div>
                        </div>
                        <div class="course-progress">
                            <div class="progress-track">
                                <div class="progress-fill" data-progress="{{ course.progress|default(75) }}"></div>
                            </div>
                            <span class="progress-label">{{ course.progress|default(75) }}% Complete</span>
                        </div>
                        <div class="card-glow"></div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="empty-state">
                    <div class="empty-visual">
                        <div class="empty-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="empty-particles">
                            <div class="particle"></div>
                            <div class="particle"></div>
                            <div class="particle"></div>
                        </div>
                    </div>
                    <h3 class="empty-title">{{ 'Ready to teach?' if session.role == 'teacher' else 'Ready to learn?' }}</h3>
                    <p class="empty-text">{{ 'Create your first course and start sharing knowledge' if session.role == 'teacher' else 'Join a course and begin your learning journey' }}</p>
                    <div class="empty-action">
                        {% if session.role == 'teacher' %}
                        <a href="{{ url_for('create_course') }}" class="rainbow-btn large">
                            <i class="fas fa-plus"></i>
                            <span>Create Your First Course</span>
                            <div class="btn-shine"></div>
                        </a>
                        {% else %}
                        <button class="rainbow-btn large" data-bs-toggle="modal" data-bs-target="#joinCourseModal">
                            <i class="fas fa-plus"></i>
                            <span>Join Your First Course</span>
                            <div class="btn-shine"></div>
                        </button>
                        {% endif %}
                    </div>
                </div>
                {% endif %}
            </div>

            <!-- Activity Sidebar -->
            <div class="activity-sidebar">
                <div class="activity-header">
                    <h3 class="activity-title">Recent Activity</h3>
                    <div class="live-indicator">
                        <div class="pulse-dot"></div>
                        <span>Live</span>
                    </div>
                </div>
                <div class="activity-feed">
                    {% if session.role == 'teacher' %}
                    <div class="activity-item">
                        <div class="activity-icon purple">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="activity-content">
                            <div class="activity-title">Course Management</div>
                            <div class="activity-desc">{{ courses|length }} active courses</div>
                            <div class="activity-time">Just now</div>
                        </div>
                    </div>
                    {% else %}
                    <div class="activity-item">
                        <div class="activity-icon blue">
                            <i class="fas fa-book-open"></i>
                        </div>
                        <div class="activity-content">
                            <div class="activity-title">Learning Progress</div>
                            <div class="activity-desc">{{ courses|length }} courses enrolled</div>
                            <div class="activity-time">Just now</div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Join Course Modal -->
{% if session.role == 'student' %}
<div class="modal fade" id="joinCourseModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content vibrant-modal">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fas fa-plus-circle me-2"></i>Join Course
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form method="POST" action="{{ url_for('join_course') }}">
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">
                            <i class="fas fa-key me-2"></i>Course Code
                        </label>
                        <input type="text" class="form-control vibrant-input" name="course_code" 
                               placeholder="Enter the course code" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="rainbow-btn">
                        <i class="fas fa-sign-in-alt"></i>
                        <span>Join Course</span>
                        <div class="btn-shine"></div>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endif %}

<style>
/* Vibrant Modern Dashboard */
.vibrant-dashboard {
    display: flex;
    min-height: 100vh;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
    background-size: 400% 400%;
    animation: gradient-flow 15s ease infinite;
    position: relative;
    overflow: hidden;
}

/* Animated Background */
.animated-bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
}

.wave {
    position: absolute;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, rgba(255,255,255,0.1), transparent);
    border-radius: 50%;
    animation: wave-float 20s infinite linear;
}

.wave1 { top: -50%; left: -50%; animation-delay: 0s; }
.wave2 { top: -30%; left: -70%; animation-delay: -7s; }
.wave3 { top: -70%; left: -30%; animation-delay: -14s; }

.floating-shapes {
    position: absolute;
    width: 100%;
    height: 100%;
}

.shape {
    position: absolute;
    animation: float-around 25s infinite linear;
}

.circle {
    width: 20px;
    height: 20px;
    background: rgba(255,255,255,0.2);
    border-radius: 50%;
    top: 20%;
    left: 10%;
}

.triangle {
    width: 0;
    height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-bottom: 20px solid rgba(255,255,255,0.15);
    top: 60%;
    left: 80%;
    animation-delay: -5s;
}

.square {
    width: 15px;
    height: 15px;
    background: rgba(255,255,255,0.1);
    transform: rotate(45deg);
    top: 80%;
    left: 30%;
    animation-delay: -10s;
}

.hexagon {
    width: 20px;
    height: 20px;
    background: rgba(255,255,255,0.12);
    clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
    top: 40%;
    left: 70%;
    animation-delay: -15s;
}

/* Colorful Sidebar */
.colorful-sidebar {
    width: 280px;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    border-right: 1px solid rgba(255, 255, 255, 0.3);
    position: fixed;
    height: 100vh;
    z-index: 1000;
    box-shadow: 0 0 50px rgba(0, 0, 0, 0.1);
}

.sidebar-header {
    padding: 2rem 1.5rem;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.brand-logo {
    display: flex;
    align-items: center;
    gap: 15px;
}

.logo-container {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.5rem;
    position: relative;
    animation: logo-pulse 3s infinite;
}

.logo-glow {
    position: absolute;
    top: -5px;
    left: -5px;
    right: -5px;
    bottom: -5px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 20px;
    opacity: 0.3;
    animation: glow-pulse 2s infinite;
    z-index: -1;
}

.brand-text {
    font-size: 1.5rem;
    font-weight: 700;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.sidebar-nav {
    padding: 1rem;
}

.nav-section {
    margin-bottom: 2rem;
}

.section-title {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    color: #666;
    margin-bottom: 1rem;
    padding: 0 1rem;
    letter-spacing: 1px;
}

.nav-item {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px 20px;
    margin-bottom: 8px;
    border-radius: 15px;
    text-decoration: none;
    color: #333;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.nav-item:hover,
.nav-item.active {
    color: white;
    transform: translateX(10px) scale(1.02);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

.nav-item.active {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.nav-icon {
    width: 40px;
    height: 40px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    color: white;
    transition: all 0.3s ease;
}

.nav-icon.purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
.nav-icon.blue { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
.nav-icon.orange { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
.nav-icon.teal { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); }
.nav-icon.green { background: linear-gradient(135deg, #56ab2f 0%, #a8e6cf 100%); }

.nav-ripple {
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.5s ease;
}

.nav-item:hover .nav-ripple {
    left: 100%;
}

/* Main Content */
.main-content {
    flex: 1;
    margin-left: 280px;
    padding: 2rem;
    position: relative;
    z-index: 10;
}

/* Hero Section */
.hero-section {
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 25px;
    padding: 3rem;
    margin-bottom: 2rem;
    position: relative;
    overflow: hidden;
}

.hero-bg {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
    animation: hero-shimmer 4s ease-in-out infinite;
}

.hero-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    z-index: 2;
}

.welcome-area {
    display: flex;
    align-items: center;
    gap: 2rem;
}

.welcome-title {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
}

.wave-text {
    display: block;
    color: #666;
    font-size: 1.2rem;
    margin-bottom: 0.5rem;
    animation: wave-text 2s ease-in-out infinite;
}

.name-highlight {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: text-glow 3s ease-in-out infinite;
}

.welcome-subtitle {
    color: #666;
    font-size: 1.1rem;
    margin: 0;
}

.welcome-animation {
    position: relative;
}

.orbit {
    width: 100px;
    height: 100px;
    border: 2px dashed rgba(102, 126, 234, 0.3);
    border-radius: 50%;
    position: relative;
    animation: orbit-rotate 10s linear infinite;
}

.planet {
    width: 20px;
    height: 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 50%;
    position: absolute;
    top: -10px;
    left: 40px;
    box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
}

/* Rainbow Buttons */
.rainbow-btn {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 15px 30px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
    background-size: 300% 300%;
    border: none;
    border-radius: 50px;
    color: white;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    animation: rainbow-shift 3s ease infinite;
}

.rainbow-btn.large {
    padding: 20px 40px;
    font-size: 1.1rem;
}

.rainbow-btn:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
    color: white;
    text-decoration: none;
}

.btn-shine {
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
    transition: left 0.5s ease;
}

.rainbow-btn:hover .btn-shine {
    left: 100%;
}

/* Dynamic Stats */
.stats-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
    margin-bottom: 3rem;
}

.stat-card {
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 20px;
    padding: 2rem;
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
}

.stat-card:hover {
    transform: translateY(-10px) rotate(2deg);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
}

.stat-bg {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    opacity: 0.1;
    transition: opacity 0.3s ease;
}

.stat-card.purple .stat-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
.stat-card.blue .stat-bg { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
.stat-card.orange .stat-bg { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
.stat-card.teal .stat-bg { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); }

.stat-card:hover .stat-bg {
    opacity: 0.2;
}

.stat-icon {
    width: 70px;
    height: 70px;
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    color: white;
    margin-bottom: 1.5rem;
    animation: icon-bounce 2s ease-in-out infinite;
}

.stat-card.purple .stat-icon { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
.stat-card.blue .stat-icon { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
.stat-card.orange .stat-icon { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
.stat-card.teal .stat-icon { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); }

.stat-number {
    font-size: 3rem;
    font-weight: 700;
    color: #333;
    margin-bottom: 0.5rem;
}

.stat-label {
    color: #666;
    font-size: 1rem;
    font-weight: 600;
}

.stat-wave {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 4px;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.stat-card.purple .stat-wave { background: linear-gradient(90deg, #667eea, #764ba2); }
.stat-card.blue .stat-wave { background: linear-gradient(90deg, #4facfe, #00f2fe); }
.stat-card.orange .stat-wave { background: linear-gradient(90deg, #f093fb, #f5576c); }
.stat-card.teal .stat-wave { background: linear-gradient(90deg, #11998e, #38ef7d); }

.stat-card:hover .stat-wave {
    opacity: 1;
    animation: wave-flow 1s ease infinite;
}

/* Content Area */
.content-area {
    display: grid;
    grid-template-columns: 1fr 350px;
    gap: 2rem;
}

.section-header {
    margin-bottom: 2rem;
}

.section-title {
    position: relative;
    display: inline-block;
}

.title-text {
    font-size: 2rem;
    font-weight: 700;
    color: #333;
}

.title-decoration {
    position: absolute;
    bottom: -10px;
    left: 0;
    width: 100%;
    height: 4px;
    background: linear-gradient(90deg, #667eea, #764ba2, #f093fb);
    border-radius: 2px;
    animation: decoration-glow 2s ease-in-out infinite;
}

/* Course Cards */
.courses-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 2rem;
}

.course-card {
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 20px;
    padding: 2rem;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
}

.course-card:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
}

.card-bg {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.course-card:hover .card-bg {
    opacity: 1;
}

.course-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
}

.course-avatar {
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.5rem;
    font-weight: 700;
    position: relative;
    animation: avatar-pulse 3s ease-in-out infinite;
}

.avatar-ring {
    position: absolute;
    top: -5px;
    left: -5px;
    right: -5px;
    bottom: -5px;
    border: 2px solid rgba(102, 126, 234, 0.3);
    border-radius: 20px;
    animation: ring-rotate 4s linear infinite;
}

.course-badge {
    background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
    color: white;
    padding: 8px 16px;
    border-radius: 25px;
    font-size: 0.8rem;
    font-weight: 600;
    text-transform: uppercase;
    animation: badge-glow 2s ease-in-out infinite;
}

.course-name {
    font-size: 1.3rem;
    font-weight: 700;
    color: #333;
    margin-bottom: 1rem;
}

.course-desc {
    color: #666;
    line-height: 1.5;
    margin-bottom: 1.5rem;
}

.course-stats {
    display: flex;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
}

.stat-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: #666;
    font-size: 0.9rem;
}

.progress-track {
    width: 100%;
    height: 8px;
    background: rgba(0, 0, 0, 0.1);
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 0.5rem;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #11998e, #38ef7d);
    border-radius: 4px;
    transition: width 1s ease;
    animation: progress-glow 2s ease-in-out infinite;
}

.progress-label {
    color: #666;
    font-size: 0.8rem;
    font-weight: 600;
}

.card-glow {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #667eea, #764ba2, #f093fb);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.course-card:hover .card-glow {
    opacity: 1;
    animation: glow-flow 1s ease infinite;
}

/* Empty State */
.empty-state {
    text-align: center;
    padding: 4rem 2rem;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(20px);
    border: 2px dashed rgba(102, 126, 234, 0.3);
    border-radius: 20px;
}

.empty-visual {
    position: relative;
    margin-bottom: 2rem;
}

.empty-icon {
    width: 120px;
    height: 120px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
    font-size: 3rem;
    color: white;
    animation: empty-bounce 3s ease-in-out infinite;
}

.empty-particles {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

.particle {
    position: absolute;
    width: 8px;
    height: 8px;
    background: linear-gradient(45deg, #667eea, #764ba2);
    border-radius: 50%;
    animation: particle-float 4s ease-in-out infinite;
}

.particle:nth-child(1) { top: -60px; left: -20px; animation-delay: 0s; }
.particle:nth-child(2) { top: -40px; left: 40px; animation-delay: 1s; }
.particle:nth-child(3) { top: 20px; left: -50px; animation-delay: 2s; }

.empty-title {
    font-size: 1.8rem;
    font-weight: 700;
    color: #333;
    margin-bottom: 1rem;
}

.empty-text {
    color: #666;
    margin-bottom: 2rem;
    font-size: 1.1rem;
}

/* Activity Sidebar */
.activity-sidebar {
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 20px;
    overflow: hidden;
}

.activity-header {
    padding: 1.5rem;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.activity-title {
    font-size: 1.2rem;
    font-weight: 700;
    color: #333;
    margin: 0;
}

.live-indicator {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #11998e;
    font-size: 0.8rem;
    font-weight: 600;
}

.pulse-dot {
    width: 8px;
    height: 8px;
    background: #11998e;
    border-radius: 50%;
    animation: pulse-dot 2s infinite;
}

.activity-feed {
    padding: 1.5rem;
}

.activity-item {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px;
    border-radius: 15px;
    transition: all 0.3s ease;
}

.activity-item:hover {
    background: rgba(102, 126, 234, 0.1);
    transform: translateX(5px);
}

.activity-icon {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.2rem;
}

.activity-icon.purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
.activity-icon.blue { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }

.activity-content .activity-title {
    font-size: 1rem;
    font-weight: 600;
    color: #333;
    margin-bottom: 0.25rem;
}

.activity-desc {
    font-size: 0.9rem;
    color: #666;
    margin-bottom: 0.25rem;
}

.activity-time {
    font-size: 0.8rem;
    color: #999;
}

/* Modal Styles */
.vibrant-modal .modal-content {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 20px;
}

.vibrant-input {
    background: rgba(255, 255, 255, 0.8);
    border: 2px solid rgba(102, 126, 234, 0.3);
    border-radius: 10px;
    padding: 12px 16px;
    transition: all 0.3s ease;
}

.vibrant-input:focus {
    background: rgba(255, 255, 255, 0.9);
    border-color: #667eea;
    box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
}

/* Animations */
@keyframes gradient-flow {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}

@keyframes wave-float {
    0%, 100% { transform: rotate(0deg) translateY(0px); }
    50% { transform: rotate(180deg) translateY(-20px); }
}

@keyframes float-around {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    33% { transform: translateY(-15px) rotate(120deg); }
    66% { transform: translateY(10px) rotate(240deg); }
}

@keyframes logo-pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

@keyframes glow-pulse {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 0.6; transform: scale(1.1); }
}

@keyframes wave-text {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-5px); }
}

@keyframes text-glow {
    0%, 100% { filter: brightness(1); }
    50% { filter: brightness(1.2); }
}

@keyframes orbit-rotate {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

@keyframes rainbow-shift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}

@keyframes hero-shimmer {
    0%, 100% { opacity: 0.1; }
    50% { opacity: 0.2; }
}

@keyframes icon-bounce {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-5px); }
}

@keyframes wave-flow {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

@keyframes decoration-glow {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

@keyframes avatar-pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

@keyframes ring-rotate {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

@keyframes badge-glow {
    0%, 100% { box-shadow: 0 0 10px rgba(17, 153, 142, 0.3); }
    50% { box-shadow: 0 0 20px rgba(17, 153, 142, 0.6); }
}

@keyframes progress-glow {
    0%, 100% { box-shadow: 0 0 10px rgba(17, 153, 142, 0.3); }
    50% { box-shadow: 0 0 20px rgba(17, 153, 142, 0.6); }
}

@keyframes glow-flow {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

@keyframes empty-bounce {
    0%, 100% { transform: translateY(0px) scale(1); }
    50% { transform: translateY(-10px) scale(1.05); }
}

@keyframes particle-float {
    0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 1; }
    50% { transform: translateY(-20px) rotate(180deg); opacity: 0.5; }
}

@keyframes pulse-dot {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.3); opacity: 0.7; }
}

/* Responsive Design */
@media (max-width: 1024px) {
    .colorful-sidebar {
        transform: translateX(-100%);
        transition: transform 0.3s ease;
    }
    
    .main-content {
        margin-left: 0;
    }
    
    .content-area {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 768px) {
    .hero-content {
        flex-direction: column;
        gap: 2rem;
        text-align: center;
    }
    
    .welcome-area {
        flex-direction: column;
        text-align: center;
    }
    
    .welcome-title {
        font-size: 2rem;
    }
    
    .stats-container {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .courses-grid {
        grid-template-columns: 1fr;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Animate stat counters
    const statCards = document.querySelectorAll('.stat-card');
    statCards.forEach(card => {
        const target = parseInt(card.dataset.value) || 0;
        const numberElement = card.querySelector('.stat-number');
        let current = 0;
        const increment = target / 60;
        
        const timer = setInterval(() => {
            current += increment;
            if (current >= target) {
                current = target;
                clearInterval(timer);
            }
            numberElement.textContent = Math.floor(current);
        }, 25);
    });
    
    // Animate progress bars
    setTimeout(() => {
        const progressBars = document.querySelectorAll('.progress-fill');
        progressBars.forEach(bar => {
            const progress = bar.dataset.progress || 75;
            bar.style.width = progress + '%';
        });
    }, 800);
    
    // Stagger card animations
    const cards = document.querySelectorAll('.course-card, .stat-card');
    cards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(50px) scale(0.9)';
        
        setTimeout(() => {
            card.style.transition = 'all 1s cubic-bezier(0.4, 0, 0.2, 1)';
            card.style.opacity = '1';
            card.style.transform = 'translateY(0) scale(1)';
        }, index * 150);
    });
    
    // Interactive hover effects
    document.addEventListener('mousemove', function(e) {
        const cards = document.querySelectorAll('.course-card, .stat-card');
        cards.forEach(card => {
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            if (x >= 0 && x <= rect.width && y >= 0 && y <= rect.height) {
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                const rotateX = (y - centerY) / 10;
                const rotateY = (centerX - x) / 10;
                
                card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateZ(10px)`;
            } else {
                card.style.transform = '';
            }
        });
    });
    
    // Add click ripple effect
    document.addEventListener('click', function(e) {
        if (e.target.closest('.rainbow-btn, .course-card, .nav-item')) {
            const element = e.target.closest('.rainbow-btn, .course-card, .nav-item');
            const ripple = document.createElement('div');
            const rect = element.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = e.clientX - rect.left - size / 2;
            const y = e.clientY - rect.top - size / 2;
            
            ripple.style.cssText = `
                position: absolute;
                width: ${size}px;
                height: ${size}px;
                left: ${x}px;
                top: ${y}px;
                background: radial-gradient(circle, rgba(255,255,255,0.6) 0%, transparent 70%);
                border-radius: 50%;
                transform: scale(0);
                animation: ripple-effect 0.8s ease-out;
                pointer-events: none;
                z-index: 1000;
            `;
            
            element.style.position = 'relative';
            element.style.overflow = 'hidden';
            element.appendChild(ripple);
            
            setTimeout(() => ripple.remove(), 800);
        }
    });
});

// Add ripple animation
const style = document.createElement('style');
style.textContent = `
    @keyframes ripple-effect {
        to {
            transform: scale(2.5);
            opacity: 0;
        }
    }
`;
document.head.appendChild(style);
</script>

<div class="container">
{% endblock %}